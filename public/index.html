<!DOCTYPE html>
<html>

<head>
    <meta charset=utf-8>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" crossorigin="anonymous"></script>
	<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script type="text/javascript" src="/socket.io/socket.io.js"></script>
	<link href="style/styles.css" rel="stylesheet">
</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-md-3 leftside">
                <h3>Your name is <span id="current_user_name"></span></h3>
				
				<button id="logoutBtn"><i class="fa fa-facebook"></i>Facebook Logout</button>
				<button id="loginBtn"><i class="fa fa-facebook"></i>Facebook Login</button>
				<div id='pict'></div>
				<input type="hidden" id="picrscr" value="">
				<div id="response"></div>
				<script>
					function getUserData() {
					FB.api('/me', 'GET', {fields: 'first_name,last_name,name,id,picture.width(100).height(100)'},function(response) {
						document.getElementById('response').innerHTML = 'Hello ' + response.name;
						$('#input-user-name').val(response.name);
						document.getElementById('pict').innerHTML = "<img src='"+response.picture.data.url+"'>";
						$('#picrscr').val(response.picture.data.url);
						$('#user-list').append('<p>' +'<img class="useravatar_small" src="'+ response.picture.data.url+'">'+ response.name +'</p>');
					});
				}

				window.fbAsyncInit = function() {
					//SDK loaded, initialize it
					FB.init({
						appId      : '290383781535876',//184316765568102
						xfbml      : true,
						version    : 'v2.2'
					});

					//check user session and refresh it
					FB.getLoginStatus(function(response) {
						if (response.status === 'connected') {
							//user is authorized
							document.getElementById('response').innerHTML = 'Hello '+ 'in faceboock';
							getUserData();
							console.log('>>>>',response);
						} else {

						}
					});
				};

				//load the JavaScript SDK
				(function(d, s, id){
					var js, fjs = d.getElementsByTagName(s)[0];
					if (d.getElementById(id)) {return;}
					js = d.createElement(s); js.id = id;
					js.src = "https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5";
					fjs.parentNode.insertBefore(js, fjs);
				}(document, 'script', 'facebook-jssdk'));

				//add event listener to login button
				document.getElementById('loginBtn').addEventListener('click', function() {
					//do the login
					FB.login(function(response) {

						if (response.authResponse) {
							//user just authorized your app
							document.getElementById('response').innerHTML = 'Hello '+ 'in faceboock';
							getUserData();
							$('#input-user-name').attr("disabled", true);
						}
					}, {scope: 'email,public_profile', return_scopes: true});
				}, false);
				document.getElementById('logoutBtn').addEventListener('click', function() {
					//do the login
					FB.logout(function(response) {
						document.getElementById('response').innerHTML =  'bye bye';
						$('#input-user-name').val('');
						$('#input-user-name').attr("disabled", false);
						$('#pict').empty();
						$('#picrscr').val('');
					});
				});
				</script>
				
				
				
				
				
				
				
				
				
				
				
				
				
                <form action="" method="post" id="create-user" class="form-inline">
                    <div class="form-group">
                        <input type="text" name="user-name" class="form-control" id="input-user-name" placeholder="name">
                    </div>
                    <input type="submit" class="btn btn-default">
                </form>
                <h3>Create room</h3>
                <form action="" method="post" id="create-room" class="form-inline">
                    <div class="form-group">
                        <input type="text" name="room-id" class="form-control" id="input-room-id" placeholder="room id">
                    </div>
                    <input type="submit" class="btn btn-default">
                </form>

                <h4>Room lists</h4>
                <div id="room-list" class="list-group"></div>
            </div>
            <div class="col-md-4 centerside">
                <h3>Chat: This room is: <span id="current_room_id"></span></h3>
                <div class="row">
                    <form action="" method="post" id="post-message" class="form-horizontal">
                        <div class="form-group">
                            <div class="">
                                <input type="text" name="message" class="form-control" id="input-message" placeholder="message">
                            </div>
                            <label for="col-sm-2 input_message">
                                <input type="submit" class="btn btn-default">
                            </label>
                        </div>
                    </form>
                    <div id="message-list"></div>
                </div>

            </div>
			<div class="rightside">
				<h4>User lists</h4>
				<div id="user-list" class="list-group"></div>
			</div>
        </div>
    </div>

<script src="js/worker.js"></script>
</body>

</html>
